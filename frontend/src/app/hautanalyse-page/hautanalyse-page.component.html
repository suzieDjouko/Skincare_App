<div class="wrapper">
  <div class="analyse start">
  <p>
  Lade ein klares Foto deines Gesichts hoch, um eine präzise Analyse deines Hautzustands zu erhalten.
</p>
<p>
  <i class="fa-solid fa-circle-info" title="Die Analyse erfolgt anonym und sicher."></i>

  Dein Bild wird nur zur Analyse verwendet – es wird nicht gespeichert oder weitergegeben.

</p>

    <div *ngIf="!selectedImageUrl" class="image-frame">
      <p>Bitte lade ein Foto hoch</p>
      <i class="fa-solid fa-camera fa-3x"></i>
    </div>
 
    <img *ngIf="selectedImageUrl" [src]="selectedImageUrl" alt="Uploaded photo" />

    <div *ngIf="errorMessage" class="error" [innerHTML]="errorMessage"></div>

    <input type="file" accept="image/*" hidden #fileInput (change)="onFileSelected($event)" />

   <div class="button-group">
  <input type="file" accept="image/*" hidden #fileInput (change)="onFileSelected($event)" />

  <button class="btn btn_flex" (click)="triggerFileUpload(fileInput)" [disabled]="!isLoggedIn">
    <span>Bild hochladen</span>
    <i class="fa-solid fa-upload"></i>
  </button>

  <button class="btn btn_flex" (click)="startAnalysis()" [disabled]="!selectedImageUrl || !isLoggedIn">
    <span>Analyse starten</span>
    <i class="fa-solid fa-microscope"></i>
  </button>
</div>

    <div *ngIf="!isLoggedIn" class="login-warning">
      🔒 Du musst <a href="/login">angemeldet</a> sein, um eine Hautanalyse durchzuführen.
    </div>
  </div>

  <div *ngIf="showResult" class="analyse finish">
    <h2>🔍 Analyse abgeschlossen</h2>
    <p>{{ resultText }}</p>
  </div>

  <div *ngIf="showProducts">
    <h2>Empfohlene Produkte</h2>
    <div class="card_container">
      <app-product-card *ngFor="let item of filteredProducts" [product]="item"></app-product-card>
    </div>
  </div>
 
</div>
